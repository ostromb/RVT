dataset:
  name: gen1
  path: datasets/gen1
  train:
    sampling: mixed
    random:
      weighted_sampling: false
    mixed:
      w_stream: 1
      w_random: 1
  eval:
    sampling: stream
  data_augmentation:
    random:
      prob_hflip: 0.5
      rotate:
        prob: 0
        min_angle_deg: 2
        max_angle_deg: 6
      zoom:
        prob: 0.8
        zoom_in:
          weight: 8
          factor:
            min: 1
            max: 1.5
        zoom_out:
          weight: 2
          factor:
            min: 1
            max: 1.2
    stream:
      prob_hflip: 0.5
      rotate:
        prob: 0
        min_angle_deg: 2
        max_angle_deg: 6
      zoom:
        prob: 0.5
        zoom_out:
          factor:
            min: 1
            max: 1.2
  ev_repr_name: stacked_histogram_dt=50_nbins=10
  sequence_length: 21
  resolution_hw:
  - 240
  - 304
  downsample_by_factor_2: false
  only_load_end_labels: false
model:
  name: rnndet
  backbone:
    name: MaxViTRNN
    compile:
      enable: false
      args:
        mode: reduce-overhead
    input_channels: 20
    enable_masking: false
    partition_split_32: 1
    embed_dim: 32
    dim_multiplier:
    - 1
    - 2
    - 4
    - 8
    num_blocks:
    - 1
    - 1
    - 1
    - 1
    T_max_chrono_init:
    - 4
    - 8
    - 16
    - 32
    stem:
      patch_size: 4
    stage:
      downsample:
        type: patch
        overlap: true
        norm_affine: true
      attention:
        use_torch_mha: false
        partition_size: ???
        dim_head: 32
        attention_bias: true
        mlp_activation: gelu
        mlp_gated: false
        mlp_bias: true
        mlp_ratio: 4
        drop_mlp: 0
        drop_path: 0
        ls_init_value: 1.0e-05
      lstm:
        dws_conv: false
        dws_conv_only_hidden: true
        dws_conv_kernel_size: 3
        drop_cell_update: 0
  fpn:
    name: PAFPN
    compile:
      enable: false
      args:
        mode: reduce-overhead
    depth: 0.33
    in_stages:
    - 2
    - 3
    - 4
    depthwise: false
    act: silu
  head:
    name: YoloX
    compile:
      enable: false
      args:
        mode: reduce-overhead
    depthwise: false
    act: silu
  postprocess:
    confidence_threshold: 0.001
    nms_threshold: 0.45
checkpoint: RVT/uzh/rvt-t.ckpt
use_test_set: 1
hardware:
  num_workers:
    eval: 2
    train: 6
  gpus: 3
batch_size:
  eval: 8
  train: 8
training:
  precision: 16
  max_epochs: 10000
  max_steps: 10000
  learning_rate: 0.0002
  lr_scheduler:
    use: true
    total_steps: ${..max_steps}
    pct_start: 0.005
    div_factor: 20
    final_div_factor: 10000
validation:
  val_check_interval: null
  check_val_every_n_epoch: 1
